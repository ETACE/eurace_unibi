<?xml version="1.0" encoding="UTF-8"?>
<xmodel version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://flame.ac.uk/schema/xmml_v2.xsd">
 <name>Market research</name>
 <version>Version 1.0, 01/02/2014</version>
 <author>Simon Gemkow, Philipp Harting, Sander van der Hoog</author>
 <description></description>
 <models/>
 <environment>
  <constants>
	 <variable>
      <type>int</type>
      <name>innovation_switched_on</name>
      <description></description>
     </variable>
	    <variable>
      <type>double</type>
      <name>mr_start_price</name>
      <description></description>
     </variable>
   <variable>
      <type>double</type>
      <name>mr_end_price</name>
      <description></description>
     </variable>
   <variable>
      <type>double</type>
      <name>mr_price_increment</name>
      <description></description>
     </variable>
	<variable>
     <type>int</type>
     <name>max_no_employees_product_innovation</name>
     <description></description>
    </variable>
	</constants>
  <functionFiles>
   <file>Household_Market_Research_Functions.c</file>
   <file>Firm_market_research_functions.c</file>
  </functionFiles>
  <timeUnits/>
  <dataTypes>

   <dataType>
    <name>consumption_goods_offer</name>
    <description>Used by household and mall to hold consumption goods offers</description>
    <variables>
     <variable>
      <type>int</type>
      <name>id</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>quality</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>price</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
   <dataType>
    <name>estimated_values_adt</name>
    <description></description>
    <variables>
   <variable>
      <type>int</type>
      <name>no_positive_response</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>probability</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>estimated_fix_costs</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>estimated_variable_costs</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>estimated_earnings</name>
      <description></description>
     </variable>
  <variable>
      <type>double</type>
      <name>additional_capital_Investments_depreciated</name>
      <description></description>
     </variable>
	  <variable>
      <type>double</type>
      <name>mean_specific_skills</name>
      <description></description>
     </variable>
		 <variable>
      <type>double</type>
      <name>mean_wage</name>
      <description></description>
     </variable>
	<variable>
      <type>int</type>
      <name>no_employees</name>
      <description></description>
     </variable>
	  </variables>
   </dataType>
	<dataType>
    <name>dt_market_research_price</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>price_change</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>price</name>
      <description></description>
     </variable>
  	<variable>
      <type>estimated_values_adt_array</type>
      <name>estimated_values</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
	<dataType>
    <name>dt_market_research_qualities</name>
    <description></description>
    <variables>
	<variable>
      <type>double</type>
      <name>quality</name>
      <description></description>
     </variable>
  	<variable>
      <type>dt_market_research_price_array</type>
      <name>market_research_price</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
	 <dataType>
    <name>dt_best_price_strategies</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>quality</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>price</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>expected_earnings</name>
      <description></description>
     </variable>
	   <variable>
      <type>double</type>
      <name>sum_earnings</name>
      <description></description>
     </variable>
	   <variable>
      <type>double</type>
      <name>sum_expected_earnings_discounted</name>
      <description></description>
     </variable>
		</variables>
	  </dataType>
	 <dataType>
    <name>dt_price_range</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>start_price</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>end_price</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>increment</name>
      <description></description>
     </variable>
</variables>
	  </dataType>
<dataType>
    <name>dt_prospective_variables</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>mean_specific_skills</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>estimated_mean_wage</name>
      <description></description>
     </variable>
  	<variable>
      <type>double</type>
      <name>no_employees</name>
      <description></description>
     </variable>
		<variable>
      <type>double</type>
      <name>earnings</name>
      <description></description>
     </variable>
		<variable>
      <type>double</type>
      <name>payment_account</name>
      <description></description>
     </variable>
<variable>
	 <type>double</type>
      <name>buffer</name>
      <description></description>
     </variable>
	<variable>
      <type>adt_capital_stock_vintages_array</type>
      <name>capital_stock_vintages</name>
      <description></description>
     </variable>
		<variable>
      <type>financing_capital_array</type>
      <name>capital_financing</name>
      <description></description>
     </variable>
		<variable>
      <type>debt_item_array</type>
      <name>loans</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
	  <dataType>
    <name>dt_variables_changed</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>price_index</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>quality_index</name>
      <description></description>
     </variable>
  	<variable>
      <type>double</type>
      <name>productivity_progress</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
<dataType>
    <name>dt_innovation_choice</name>
    <description></description>
    <variables>
     <variable>
      <type>int</type>
      <name>development_period</name>
      <description></description>
     </variable>
     <variable>
      <type>int</type>
      <name>employees_needed</name>
      <description></description>
     </variable>
	<variable>
      <type>double</type>
      <name>quality</name>
      <description></description>
     </variable>
  	<variable>
      <type>double</type>
      <name>expected_discounted_earnings</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
	<dataType>
    <name>dt_demand_function</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>quality</name>
      <description></description>
     </variable>
	  <variable>
      <type>int</type>
      <name>year</name>
      <description></description>
     </variable>
	<variable>
      <type>double</type>
      <name>factor</name>
      <description></description>
     </variable>
  	<variable>
      <type>double</type>
      <name>exponent</name>
      <description></description>
     </variable>
	<variable>
      <type>double</type>
      <name>variance</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
	<dataType>
    <name>dt_price_quantity_touple</name>
    <description></description>
    <variables>
     <variable>
      <type>double</type>
      <name>price</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>quantity</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
    <dataType>
    <name>dt_market_size</name>
    <description>Used for storing the total market size in one of the previous period.</description>
    <variables>
     <variable>
      <type>int</type>
      <name>period</name>
      <description>Number of elapsed periods.</description>
     </variable>
     <variable>
      <type>double</type>
      <name>market_size</name>
      <description>Sales in that mall in the certain period.</description>
     </variable>
    </variables>
   </dataType>
 <dataType>
    <name>dt_total_and_regional_market_size</name>
    <description>Used for storing the total market size in one of the previous period.</description>
    <variables>
     <variable>
      <type>int</type>
      <name>region_id</name>
      <description></description>
     </variable>
	   <variable>
      <type>int</type>
      <name>mall_id</name>
      <description></description>
     </variable>
     <variable>
      <type>dt_market_size_array</type>
      <name>market_sizes</name>
      <description>Sales in that mall in the certain period.</description>
     </variable>
    </variables>
   </dataType>
	 <dataType>
    <name>dt_value_lattice</name>
    <description>Used for storing the total market size in one of the previous period.</description>
    <variables>
     <variable>
      <type>double</type>
      <name>intermediate_quality</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>value</name>
      <description>Sales in that mall in the certain period.</description>
     </variable>
	<variable>
      <type>int</type>
      <name>strategy</name>
      <description>Sales in that mall in the certain period.</description>
     </variable>
    </variables>
   </dataType>
 <dataType>
    <name>dt_value_lattice_years</name>
    <description>Used for storing the total market size in one of the previous period.</description>
    <variables>
     <variable>
      <type>int</type>
      <name>year</name>
      <description></description>
     </variable>
     <variable>
      <type>dt_value_lattice_array</type>
      <name>values</name>
      <description>Sales in that mall in the certain period.</description>
     </variable>
    </variables>
   </dataType>
<dataType>
    <name>dt_monthly_estimations</name>
    <description>Used for storing the monthly estimations for earnings, labor costs, capital costs and interest payments</description>
    <variables>
	<variable>
      <type>double</type>
      <name>output</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>earnings</name>
      <description></description>
     </variable>
	    <variable>
      <type>double</type>
      <name>sold_quantity</name>
      <description></description>
     </variable>
     <variable>
      <type>double</type>
      <name>labor_costs</name>
      <description></description>
     </variable>
  <variable>
      <type>double</type>
      <name>capital_costs</name>
      <description></description>
     </variable>
  <variable>
      <type>double</type>
      <name>interest_payments</name>
      <description></description>
     </variable>
 <variable>
      <type>double</type>
      <name>wage</name>
      <description></description>
     </variable>
 <variable>
      <type>double</type>
      <name>mean_specific_skills</name>
      <description></description>
     </variable>
 <variable>
      <type>double</type>
      <name>average_productivity</name>
      <description></description>
     </variable>
<variable>
      <type>double</type>
      <name>investment_nominal</name>
      <description></description>
     </variable>
    </variables>
   </dataType>
  </dataTypes>
 </environment>
 <agents>
  <xagent>
   <name>Firm</name>
   <description>Firms want to find out the price senstivity of consumers. </description>
   <memory>
    <variable>
     <type>int</type>
     <name>market_research_sample_size</name>
     <description>Sample size of the questionaire for estimating the price sensitivity.</description>
    </variable>
	<variable>
     <type>int</type>
     <name>product_innovation</name>
     <description>Indicator variable for product innovation.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>regional_analysis</name>
     <description>Boolean variable: Market research will be carried out regionally.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>day_of_year_market_research</name>
     <description></description>
    </variable>
    <variable>
     <type>int</type>
     <name>actual_sample_size</name>
     <description></description>
    </variable>
    	<variable>
     <type>dt_total_and_regional_market_size_array</type>
     <name>last_market_sizes</name>
     <description></description>
    </variable>
 	<variable>
     <type>dt_price_range</type>
     <name>price_range_pricing</name>
     <description></description>
    </variable>
	<variable>
     <type>dt_price_range</type>
     <name>price_range_innovation</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>new_product_released</name>
     <description></description>
    </variable>
<variable>
     <type>dt_prospective_variables_array</type>
     <name>prospective_variables</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>price_at_questionnaire</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>price_index_at_questionnaire</name>
     <description></description>
    </variable>
	    <variable>
     <type>dt_best_price_strategies_array</type>
     <name>best_pricing_strategies</name>
     <description></description>
    </variable>
	    <variable>
     <type>dt_best_price_strategies</type>
     <name>best_pricing_abandon_strategy</name>
     <description></description>
    </variable>
	    <variable>
     <type>double</type>
     <name>intermediate_quality</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>no_employees_product_innovation_fundable</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>r_and_d_probability_for_incremental_success</name>
     <description></description>
    </variable>
    <variable>
     <type>int</type>
     <name>market_research_active</name>
     <description>Binary variable: 1 market research in this period.</description>
    </variable>
	 	<variable>
     <type>int</type>
     <name>innovation_successful</name>
     <description>Binary variable: 1 innvoation was succesful.</description>
    </variable>
    <variable>
     <type>double</type>
     <name>actual_market_share</name>
     <description>Market share realized on the amrket.</description>
    </variable>
    <variable>
     <type>double</type>
     <name>market_size</name>
     <description>total quantity of sold items on the market.</description>
    </variable>
      <variable>
     <type>double</type>
     <name>estimated_market_size</name>
     <description>total quantity of sold items on the market.</description>
    </variable>
      <variable>
     <type>estimators_linear_regression_array</type>
     <name>linear_regression_market_size</name>
     <description></description>
    </variable>
	 <variable>
     <type>int</type>
     <name>counter_month_since_last_price_setting</name>
     <description></description>
    </variable>
	 <variable>
     <type>dt_demand_function</type>
     <name>demand_function_pricing</name>
     <description>This holds the demand function for different qualities and years</description>
    </variable>
	<variable>
     <type>dt_demand_function_array</type>
     <name>demand_functions_product_innovation</name>
     <description>This holds the demand function for different qualities and years</description>
    </variable>
	<variable>
     <type>int</type>
     <name>market_research_delayed</name>
     <description>Flag set to 1 if the required sample size is not reached</description>
    </variable>
	  <variable>
     <type>dt_market_research_price_array</type>
     <name>market_research_data_pricing</name>
     <description></description>
    </variable>
	  <variable>
     <type>dt_market_research_qualities_array</type>
     <name>market_research_data_product_innovation</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>expected_earnings_per_month</name>
     <description></description>
    </variable>
	  <variable>
     <type>double_array</type>
     <name>expected_price_choices</name>
     <description></description>
    </variable>
 <variable>
     <type>double</type>
     <name>no_considered_qualities</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>last_interest_rate_for_loans</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>cum_earnings_last_r_d_project</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>cum_r_d_investments</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>r_d_investments_last_project</name>
     <description></description>
    </variable>
	 <variable>
     <type>int</type>
     <name>total_person_months</name>
     <description></description>
    </variable>
		 <variable>
     <type>int</type>
     <name>cum_person_months</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>actual_r_and_d_success_probability</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>last_quality</name>
     <description></description>
    </variable>
 <variable>
     <type>double</type>
     <name>quality_change</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>expected_sold_quantity_per_month</name>
     <description></description>
    </variable>
	  <variable>
     <type>double</type>
     <name>estimated_market_share</name>
     <description>Estimated market share at the current month, compued as linear combination.</description>
    </variable>
	<variable>
     <type>double</type>
     <name>estimated_market_share_beginning_of_year</name>
     <description>Market share estimation for the binning of the year.</description>
    </variable>
	<variable>
     <type>double</type>
     <name>estimated_market_share_end_of_year</name>
     <description>Market share estimation for the end of the year.</description>
    </variable>
		  <variable>
     <type>double</type>
     <name>estimated_yearly_earnings</name>
     <description></description>
    </variable>
	 <variable>
	  <type>dt_monthly_estimations</type>
     <name>expected_earnings_and_costs_over_year[12]</name>
     <description></description>
    </variable>
<variable>
  <type>double</type>
     <name>expected_output_in_current_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_profit_in_current_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_labor_costs_in_current_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_capital_costs_in_current_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_interests_in_current_month</name>
     <description></description>
    </variable>
		 <variable>
  <type>double</type>
     <name>expected_output_in_previous_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_actual_sold_quantity_in_previous_month</name>
     <description></description>
    </variable>
		 <variable>
  <type>double</type>
     <name>expected_actual_sold_quantity_in_current_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_labor_costs_in_previous_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_capital_costs_in_previous_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_interests_in_previous_month</name>
     <description></description>
    </variable>
	 <variable>
  <type>double</type>
     <name>expected_profit_in_previous_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_wage_in_current_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_wage_in_previous_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_mean_specific_skills_in_current_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_mean_specific_skills_in_previous_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_average_productivity_in_current_month</name>
     <description></description>
    </variable>
<variable>
  <type>double</type>
     <name>expected_investment_nominal_in_current_month</name>
     <description></description>
    </variable>
	<variable>
  <type>double</type>
     <name>expected_investment_nominal_in_previous_month</name>
     <description></description>
    </variable>
		<variable>
  <type>double</type>
     <name>expected_average_productivity_in_previous_month</name>
     <description></description>
    </variable>
	  <variable>
     <type>double</type>
     <name>earnings_while_last_pricing_period</name>
     <description></description>
    </variable>
	  <variable>
     <type>double</type>
     <name>sum_earnings_since_price_change</name>
     <description></description>
    </variable>
	<variable>
     <type>dt_variables_changed_array</type>
     <name>variables_last_year</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>innovation_month_counter</name>
     <description></description>
    </variable>
		<variable>
     <type>dt_variables_changed</type>
     <name>variables_change</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>r_and_d_investments_per_month</name>
     <description></description>
    </variable>
		<variable>
     <type>int</type>
     <name>innovation_flag</name>
     <description></description>
    </variable>
			<variable>
     <type>int</type>
     <name>innovation_employees_needed</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>no_employees_innovation</name>
     <description></description>
    </variable>
		<variable>
     <type>int</type>
     <name>employees_needed_innovation</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>optimal_employees_needed_innovation</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>total_no_periods_for_product_development</name>
     <description></description>
    </variable>
		<variable>
     <type>double</type>
     <name>ratio_project_value_established_product</name>
     <description></description>
    </variable>	
	<variable>
     <type>int</type>
     <name>vintage_choice_already_taken</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>change_due_to_last_innovation</name>
     <description></description>
    </variable>
		<variable>
     <type>int</type>
     <name>remaining_periods_to_complete_product_development</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>planned_quality</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>product_development_completed</name>
     <description></description>
    </variable>
		<variable>
     <type>double</type>
     <name>price_just_set_flag</name>
     <description></description>
    </variable>
	<variable>
     <type>dt_value_lattice_years_array</type>
     <name>value_lattice</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>combined_variance_demand_function</name>
     <description></description>
    </variable>
   </memory>
   <functions>
    <function>
     <name>Firm_draw_sample</name>
     <description></description>
     <currentState>MR_0</currentState>
     <nextState>MR_1</nextState>
     <inputs/>
     <outputs>
      <output>
       <messageName>interview_request</messageName>
      </output>
     </outputs>
    </function>  
    <function>
     <name>Firm_send_questionnaire</name>
     <description></description>
     <currentState>MR_1</currentState>
     <nextState>MR_2</nextState>
     <inputs>
      <input>
       <messageName>interview_positive_response</messageName>
       <filter>
        <lhs>
         <value>a.id</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>m.firm_id</value>
        </rhs>
       </filter>
      </input>
     </inputs>
     <outputs>
      <output>
       <messageName>questionnaire_pricing</messageName>
      </output>
		 <output>
       <messageName>questionnaire_innovation</messageName>
      </output>
     </outputs>
    </function>
    <function>
     <name>Firm_analyze_questionnaire</name>
     <description></description>
     <currentState>MR_3</currentState>
     <nextState>MR_4</nextState>
     <condition>
	<lhs>
      <lhs>
       <value>a.market_research_active</value>
      </lhs>
      <op>EQ</op>
      <rhs>
       <value>1</value>
      </rhs>
	</lhs><op>AND</op><rhs>
	<time>
        <period>monthly</period>
        <phase>a.day_of_month_to_act</phase>
       </time>
	</rhs>	
     </condition>
     <inputs/>
     <outputs/>
    </function>
	 <function>
     <name>Firm_prepone_vintage_choice</name>
     <description></description>
     <currentState>MR_4</currentState>
     <nextState>MR_4a</nextState>
     <inputs/>
     <outputs/>
    </function>
	 <function>
     <name>Firm_set_price</name>
     <description></description>
     <currentState>MR_4a</currentState>
     <nextState>MR_5</nextState>
     <inputs/>
     <outputs/>
    </function>
	<function>
     <name>Firm_decide_product_innovation</name>
     <description></description>
     <currentState>MR_5</currentState>
     <nextState>MR_6</nextState>
	 <condition>
      <lhs>
       <value>a.product_innovation</value>
      </lhs>
      <op>NEQ</op>
      <rhs>
       <value>0</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
	<function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>MR_5</currentState>
     <nextState>MR_6</nextState>
	 <condition>
      <lhs>
       <value>a.product_innovation</value>
      </lhs>
      <op>EQ</op>
      <rhs>
       <value>0</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
	 <function>
     <name>Firm_clean_up_arrays</name>
     <description></description>
     <currentState>MR_6</currentState>
     <nextState>Firm_Start_Producer_Role</nextState>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Firm_set_market_research_data_pricing</name>
     <description></description>
     <currentState>MR_02</currentState>
     <nextState>MR_03</nextState>
	 <condition>
      <lhs>
       <value>a.market_research_delayed</value>
      </lhs>
      <op>EQ</op>
      <rhs>
       <value>0</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
	<function>
     <name>Firm_bypass_setting_if_delayed</name>
     <description></description>
     <currentState>MR_02</currentState>
     <nextState>MR_0</nextState>
	 <condition>
      <lhs>
       <value>a.market_research_delayed</value>
      </lhs>
      <op>NEQ</op>
      <rhs>
       <value>0</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Firm_set_market_research_data_innovation</name>
     <description></description>
     <currentState>MR_03</currentState>
     <nextState>MR_0</nextState>
	 <condition>
      <lhs>
       <value>a.product_innovation</value>
      </lhs>
      <op>EQ</op>
      <rhs>
       <value>1</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
	<function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>MR_03</currentState>
     <nextState>MR_0</nextState>
	 <condition>
      <lhs>
       <value>a.product_innovation</value>
      </lhs>
      <op>NEQ</op>
      <rhs>
       <value>1</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
	 <function>
     <name>Firm_release_new_product</name>
     <description></description>
     <currentState>MR_01</currentState>
     <nextState>MR_02</nextState>
     <condition>
        <lhs><value>a.remaining_periods_to_complete_product_development</value></lhs>
  		<op>EQ</op>
 	 <rhs><value>0</value></rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>Firm_Start_Market_Research_Role</currentState>
     <nextState>MR_3</nextState>
     <condition>
      <not>
       <time>
        <period>yearly</period>
        <phase>a.day_of_year_market_research</phase>
       </time>
      </not>
     </condition>
     <inputs/>
     <outputs/>
    </function>
     <function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>Firm_Start_Market_Research_Role</currentState>
     <nextState>MR_01</nextState>
     <condition>
       <time>
        <period>yearly</period>
        <phase>a.day_of_year_market_research</phase>
       </time>
     </condition>
     <inputs/>
     <outputs/>
    </function>
     <function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>MR_01</currentState>
     <nextState>MR_02</nextState>
     <condition>
	 <lhs><value>a.remaining_periods_to_complete_product_development</value></lhs>
  		<op>NEQ</op>
 	 <rhs><value>0</value></rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Firm_count_questionnaire</name>
     <description></description>
     <currentState>MR_2</currentState>
     <nextState>MR_3</nextState>
     <inputs>
      <input>
       <messageName>filled_out_questionnaire_pricing</messageName>
       <filter>
        <lhs>
         <value>a.id</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>m.firm_id</value>
        </rhs>
       </filter>
      </input>
		<input>
       <messageName>filled_out_questionnaire_product_innovation</messageName>
       <filter>
        <lhs>
         <value>a.id</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>m.firm_id</value>
        </rhs>
       </filter>
      </input>
     </inputs>
     <outputs/>
    </function>
    <function>
     <name>Firm_idle</name>
     <description></description>
     <currentState>MR_3</currentState>
     <nextState>Firm_Start_Producer_Role</nextState>
     <condition>
    <lhs>
      <lhs>
       <value>a.market_research_active</value>
      </lhs>
      <op>NEQ</op>
      <rhs>
       <value>1</value>
      </rhs>
	</lhs><op>OR</op><rhs>
	<not>	
		<time>
        <period>monthly</period>
        <phase>a.day_of_month_to_act</phase>
       </time>
		</not>
	</rhs>	
     </condition>
     <inputs/>
     <outputs/>
    </function>
   </functions>
  </xagent>
  <xagent>
   <name>Household</name>
   <description>Households are randomly chosen in order to find out the price senitivity on the consumption goods market.</description>
   <memory>
    <variable>
     <type>double</type>
     <name>questionnaire_attending_propability</name>
     <description>Propability to attend a interview.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>willingness_to_attend</name>
     <description>Boolean variable: Willingness to attend the questionaire. 1 is yes.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>interviewer_id</name>
     <description></description>
    </variable>
    <variable>
     <type>int</type>
     <name>random_no_test</name>
     <description></description>
    </variable>
	  <variable>
     <type>int</type>
     <name>questionnaire[40]</name>
     <description></description>
    </variable>
	   <variable>
     <type>consumption_goods_offer_array</type>
     <name>current_price_quality_list</name>
     <description></description>
    </variable>
   </memory>
   <functions>
    <function>
     <name>Household_decide_to_attend_interview</name>
     <description></description>
     <currentState>Household_Start_Market_Research_Role</currentState>
     <nextState>HH_MR_1</nextState>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Household_idle</name>
     <description></description>
     <currentState>HH_MR_1</currentState>
     <nextState>Household_Start_Financial_Market_Role</nextState>
     <condition>
      <lhs>
       <value>a.willingness_to_attend</value>
      </lhs>
      <op>NEQ</op>
      <rhs>
       <value>1</value>
      </rhs>
     </condition>
     <inputs/>
     <outputs/>
    </function>
    <function>
     <name>Household_respond</name>
     <description></description>
     <currentState>HH_MR_1</currentState>
     <nextState>HH_MR_2</nextState>
     <condition>
      <lhs>
       <value>a.willingness_to_attend</value>
      </lhs>
      <op>EQ</op>
      <rhs>
       <value>1</value>
      </rhs>
     </condition>
     <inputs>
      <input>
       <messageName>interview_request</messageName>
		<random>true</random>
       <filter>
        <lhs>
         <value>a.willingness_to_attend</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>1</value>
        </rhs>
       </filter>
      </input>
     </inputs>
     <outputs>
      <output>
       <messageName>interview_positive_response</messageName>
      </output>
     </outputs>
    </function>
    <function>
     <name>Household_respond_questionnaire</name>
     <description></description>
     <currentState>HH_MR_2</currentState>
     <nextState>Household_Start_Financial_Market_Role</nextState>
     <inputs>
      <input>
       <messageName>questionnaire_pricing</messageName>
       <filter>
        <lhs>
         <value>a.interviewer_id</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>m.firm_id</value>
        </rhs>
       </filter>
      </input>
		 <input>
       <messageName>questionnaire_innovation</messageName>
       <filter>
        <lhs>
         <value>a.interviewer_id</value>
        </lhs>
        <op>EQ</op>
        <rhs>
         <value>m.firm_id</value>
        </rhs>
       </filter>
      </input>
     </inputs>
     <outputs>
      <output>
       <messageName>filled_out_questionnaire_pricing</messageName>
      </output>
		<output>
       <messageName>filled_out_questionnaire_product_innovation</messageName>
      </output>
     </outputs>
    </function>
   </functions>
  </xagent>
 </agents>
 <messages>
  <message>
   <name>interview_request</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description></description>
    </variable>
   </variables>
  </message>
  <message>
   <name>interview_positive_response</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>id</name>
     <description>Household ID.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>region_id</name>
     <description>Region ID of household.</description>
    </variable>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description>Firm ID</description>
    </variable>
   </variables>
  </message>
  <message>
   <name>questionnaire_pricing</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>start_price</name>
     <description></description>
    </variable>
    <variable>
     <type>int</type>
     <name>times_increment</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>increment</name>
     <description></description>
    </variable>
	 <variable>
	  <type>double</type>
     <name>quality</name>
     <description></description>
    </variable>
	<variable>
	  <type>double</type>
     <name>average_price_growth</name>
     <description></description>
    </variable>
   </variables>
  </message>
	 <message>
   <name>questionnaire_innovation</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>start_price</name>
     <description></description>
    </variable>
    <variable>
     <type>int</type>
     <name>times_increment</name>
     <description></description>
    </variable>
    <variable>
     <type>double</type>
     <name>increment</name>
     <description></description>
    </variable>
	 <variable>
	  <type>double</type>
     <name>quality</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>growth_price_index</name>
     <description></description>
    </variable>
	 <variable>
     <type>double</type>
     <name>growth_quality_index</name>
     <description></description>
    </variable>
	<variable>
     <type>int</type>
     <name>year_under_consideration</name>
     <description></description>
    </variable>
   </variables>
  </message>
  <message>
   <name>filled_out_questionnaire_pricing</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description></description>
    </variable> <variable>
     <type>int</type>
     <name>region_id</name>
     <description></description>
    </variable>
    <variable>
    	<type>int</type>
     <name>questionnaire[40]</name>
     <description></description>
    </variable>
   </variables>
  </message>
 <message>
   <name>filled_out_questionnaire_product_innovation</name>
   <description></description>
   <variables>
    <variable>
     <type>int</type>
     <name>firm_id</name>
     <description></description>
    </variable> <variable>
     <type>int</type>
     <name>region_id</name>
     <description></description>
    </variable>
	<variable>
     <type>double</type>
     <name>quality</name>
     <description></description>
    </variable>
   	<variable>
    <type>int</type>
     <name>questionnaire[40]</name>
     <description></description>
    </variable>
	 <variable>
     <type>int</type>
     <name>year</name>
     <description></description>
    </variable>
   </variables>
  </message>
 </messages>
</xmodel>
